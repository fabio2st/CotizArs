{"version":3,"file":"Moneda.js","sourceRoot":"","sources":["../Moneda.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6BAA+B;AAC/B,2CAAsC;AACtC,+CAAkD;AAYlD;IAAmB,wBAAoC;IAKnD,cAAY,KAAK;QAAjB,YACI,kBAAM,KAAK,CAAC,SACf;QALD,aAAO,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QACpC,aAAO,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;;IAIlB,CAAC;IACD,gCAAiB,GAAjB;QACI,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC9B,CAAC;IACD,mCAAoB,GAApB;QACI,YAAY,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;IAChD,CAAC;IAEO,iCAAkB,GAA1B;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,+BAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;SACxE;QACD,IAAI,CAAC,wBAAwB,GAAG,UAAU,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;IACzF,CAAC;IAED,qBAAM,GAAN;QACM,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAClC,OAAO,CACH,IAAI,CAAC,WAAW,EAAE,CACrB,CAAC;IACN,CAAC;IAEO,uCAAwB,GAAhC;QAAA,iBAIC;QAHG,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,WAAW,EAAE,IAAI,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,WAAW,EAAE,EAAtD,CAAsD,CAAC,CAAC;QACpG,IAAI,KAAK,IAAI,SAAS;YAClB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;IAChD,CAAC;IAEO,0BAAW,GAAnB;QACI,OAAO;YACH;gBACI;oBACI,+BAAS,CACL;gBACR,mCACK,IAAI,CAAC,QAAQ,EAAE,CACZ,CACJ;YACR;;gBAAmB,IAAI,EAAE,CAAO,CAC9B,CAAC;IACX,CAAC;IAED,uBAAQ,GAAR;QAAA,iBAQK;QAPD,OAAO,CACP,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,CAAC,IAAK,OAAA,CAC1B;YACI;gBAAK,IAAI;qBAAQ;YACjB;;gBAAO,KAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAM,CAC3B,CACJ,EALyB,CAKzB,CAAC,CAAC,CAAA;IACP,CAAC;IAAA,CAAC;IACV,WAAC;AAAD,CAAC,AA1DD,CAAmB,KAAK,CAAC,SAAS,GA0DjC;AAEU,QAAA,MAAM,GAA6B,qBAAO,CAAC,UAAA,KAAK,IAAM,oBAAY,KAAK,EAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC","sourcesContent":["import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getOneCotizacion } from './async-thunks';\r\nimport { IMonedaData } from './redux-actions';\r\n//import { monedaTable } from './moneda-table';\r\n//import ReactDOM from 'react-dom';\r\n//import { Router } from './router';\r\n//import { fetchMoneda } from './moneda-actions'\r\n\r\ninterface Props_redux extends IMonedaData {\r\n    dispatch: <T>(action: any) => T\r\n}\r\ninterface IState { }\r\n\r\nclass Comp extends React.Component<Props_redux, IState> {\r\n    intervaloDeActualizacion: number;\r\n    monedas = ['Dolar', 'Euro', 'Real'];\r\n    precios = [0,0,0];\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    componentDidMount() {\r\n        this.getAllCotizaciones();\r\n    }\r\n    componentWillUnmount() {\r\n        clearTimeout(this.intervaloDeActualizacion);\r\n    }\r\n\r\n    private getAllCotizaciones() {\r\n        for (var x = 0; x < this.monedas.length; x++) {\r\n            this.props.dispatch(getOneCotizacion(this.monedas[x].toLowerCase()));\r\n        }\r\n        this.intervaloDeActualizacion = setTimeout(this.getAllCotizaciones.bind(this), 5000);\r\n    }\r\n\r\n    render() {\r\n          this.setCotizaciónActualizada();\r\n        return (\r\n            this.MonedaTable()\r\n        );\r\n    }\r\n\r\n    private setCotizaciónActualizada() {\r\n        var index = this.monedas.findIndex(value => value.toUpperCase() == this.props.moneda.toUpperCase());\r\n        if (index != undefined)\r\n            this.precios[index] = this.props.precio;\r\n    }\r\n\r\n    private MonedaTable() {\r\n        return <div>\r\n            <table>\r\n                <thead>\r\n                    <tr></tr>\r\n                </thead>\r\n                <tbody>\r\n                    {this.getTable()}\r\n                </tbody>\r\n            </table>\r\n            <div>Actualizado: {Date()}</div>\r\n        </div>;\r\n    }\r\n\r\n    getTable() {\r\n        return (\r\n        this.monedas.map((item, i) => (\r\n            <tr>\r\n                <td>{item}: </td>\r\n                <td>$ {this.precios[i]}</td>\r\n            </tr>\r\n            )))\r\n        };\r\n}\r\n\r\nexport var Moneda: React.ComponentClass<{}> = connect(state => { return { ...state }; })(Comp);"]}