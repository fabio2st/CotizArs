{"version":3,"file":"Moneda.js","sourceRoot":"","sources":["../Moneda.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6BAA+B;AAC/B,2CAAsC;AACtC,+CAAkD;AAclD;IAAmB,wBAAoC;IAOnD,cAAY,KAAK;QAAjB,YACI,kBAAM,KAAK,CAAC,SACf;QAPD,aAAO,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;QACpC,aAAO,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAED,oBAAc,GAAG;YAAM,KAAI,CAAC,WAAW,EAAE;YAAC,+CAAsB,CAAM,CAAC;;IAIxF,CAAC;IACD,gCAAiB,GAAjB;QACI,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC9B,CAAC;IACD,mCAAoB,GAApB;QACI,YAAY,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;IAChD,CAAC;IAEO,iCAAkB,GAA1B;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,+BAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;SACxE;QACD,IAAI,CAAC,wBAAwB,GAAG,UAAU,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;IACzF,CAAC;IAED,qBAAM,GAAN;QACU,IAAA,KAAqB,IAAI,CAAC,KAAK,EAA7B,KAAK,WAAA,EAAE,OAAO,aAAe,CAAC;QACtC,IAAI,KAAK,EAAE;YACP,OAAO,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;SACnC;QACD,IAAI,OAAO,EAAE;YACT,OAAO,IAAI,CAAC,cAAc,CAAC;SAC9B;QACD,IAAI,CAAC,wBAAwB,EAAE,CAAC;QAChC,OAAO,CAAE,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;IACjC,CAAC;IAEO,uCAAwB,GAAhC;QAAA,iBAIC;QAHG,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,UAAA,KAAK,IAAI,OAAA,KAAK,CAAC,WAAW,EAAE,IAAI,KAAI,CAAC,KAAK,CAAC,YAAY,CAAC,WAAW,EAAE,EAA5D,CAA4D,CAAC,CAAC;QAC1G,IAAI,KAAK,IAAI,SAAS;YAClB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;IAChD,CAAC;IAEO,0BAAW,GAAnB;QACI,OAAO,CACH;YACI;gBACI;oBACI,+BAAS,CACL;gBACR,mCACK,IAAI,CAAC,WAAW,EAAE,CACf,CACJ;YACR;;gBAAmB,IAAI,EAAE,CAAO,CAC9B,CACT,CAAA;IACL,CAAC;IAED,0BAAW,GAAX;QAAA,iBAQK;QAPD,OAAO,CACP,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,CAAC,IAAK,OAAA,CAC1B,4BAAI,GAAG,EAAE,CAAC;YACN;gBAAK,IAAI;qBAAQ;YACjB;;gBAAO,KAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAM,CAC3B,CACJ,EALyB,CAKzB,CAAC,CAAC,CAAA;IACP,CAAC;IAAA,CAAC;IACN,2BAAY,GAAZ,UAAa,KAAU;QACnB,OAAO;;YAAY,KAAK,CAAC,OAAO,CAAO,CAAC;IAC5C,CAAC;IACL,WAAC;AAAD,CAAC,AAtED,CAAmB,KAAK,CAAC,SAAS,GAsEjC;AAED,IAAM,eAAe,GAAG,UAAA,KAAK,IAAI,OAAA,CAAC;IAC9B,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI;IACrB,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,OAAO;IAC3B,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,KAAK;CAC1B,CAAC,EAJ+B,CAI/B,CAAC;AACQ,QAAA,MAAM,GAA6B,qBAAO,CAAC,UAAA,KAAK,IAAM,oBAAY,KAAK,EAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC","sourcesContent":["import * as React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { getOneCotizacion } from './async-thunks';\r\nimport { IMonedaData } from './redux-actions';\r\n//import { monedaTable } from './moneda-table';\r\n//import ReactDOM from 'react-dom';\r\n//import { Router } from './router';\r\n//import { fetchMoneda } from './moneda-actions'\r\n\r\ninterface Props_redux extends IMonedaData {\r\n    dispatch: <T>(action: any) => T\r\n    error\r\n    loading\r\n}\r\ninterface IState { }\r\n\r\nclass Comp extends React.Component<Props_redux, IState> {\r\n    intervaloDeActualizacion: number;\r\n    monedas = ['Dolar', 'Euro', 'Real'];\r\n    precios = [0,0,0];\r\n\r\n    private readonly mensajeDeCarga = <div>{this.MonedaTable()}<div>Cargando...</div></div>;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    componentDidMount() {\r\n        this.getAllCotizaciones();\r\n    }\r\n    componentWillUnmount() {\r\n        clearTimeout(this.intervaloDeActualizacion);\r\n    }\r\n\r\n    private getAllCotizaciones() {\r\n        for (var x = 0; x < this.monedas.length; x++) {\r\n            this.props.dispatch(getOneCotizacion(this.monedas[x].toLowerCase()));\r\n        }\r\n        this.intervaloDeActualizacion = setTimeout(this.getAllCotizaciones.bind(this), 5000);\r\n    }\r\n\r\n    render() {\r\n        const { error, loading } = this.props;\r\n        if (error) {\r\n            return this.mensajeError(error);\r\n        }\r\n        if (loading) {\r\n            return this.mensajeDeCarga;\r\n        }\r\n        this.setCotizaciónActualizada();\r\n        return ( this.MonedaTable());\r\n    }\r\n\r\n    private setCotizaciónActualizada() {\r\n        var index = this.monedas.findIndex(value => value.toUpperCase() == this.props.nombreMoneda.toUpperCase());\r\n        if (index != undefined)\r\n            this.precios[index] = this.props.precio;\r\n    }\r\n\r\n    private MonedaTable() {\r\n        return (\r\n            <div>\r\n                <table>\r\n                    <thead>\r\n                        <tr></tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.MonedaFilas()}\r\n                    </tbody>\r\n                </table>\r\n                <div>Actualizado: {Date()}</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    MonedaFilas() {\r\n        return (\r\n        this.monedas.map((item, i) => (\r\n            <tr key={i}>\r\n                <td>{item}: </td>\r\n                <td>$ {this.precios[i]}</td>\r\n            </tr>\r\n            )))\r\n        };\r\n    mensajeError(error: any) {\r\n        return <div>Error!{error.message}</div>;\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    item: state.data.item,\r\n    loading: state.data.loading,\r\n    error: state.data.error\r\n});\r\nexport var Moneda: React.ComponentClass<{}> = connect(state => { return { ...state }; })(Comp);\r\n\r\n\r\n"]}